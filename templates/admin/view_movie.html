{% extends "base.html" %}

{% block header_title %}Movies Management{% endblock %}

{% block sidebar %}
    <li><a href="{{url_for('admin.admin_home')}}"><i class="fas fa-home"></i> Dashboard</a></li>
    <li><a href="{{url_for('admin.add_movie')}}"><i class="fas fa-film"></i> Add Movie</a></li>
    <li><a href="{{url_for('admin.delete_movie')}}"><i class="fas fa-trash-alt"></i> Delete Movie</a></li>
    <li><a href="{{url_for('admin.view_movie')}}" class="active"><i class="fas fa-list"></i> View Movies</a></li>
    <div style="border-top: 1px solid var(--border-color); margin: 10px 15px;"></div>
    <li><a href="{{url_for('admin.add_theater')}}"><i class="fas fa-building"></i> Add Theater</a></li>
    <li><a href="{{url_for('admin.view_theater')}}"><i class="fas fa-map-marker-alt"></i> View Theaters</a></li>
{% endblock %}

{% block content %}
    
    <div style="max-width: 1000px; margin: 0 auto;">
        
        <h2 class="page-title">View Movies</h2>

        <div style="background-color: var(--bg-primary); padding: 20px; border-radius: 10px; margin-bottom: 25px; border: 1px solid var(--border-color);">
            <form action="{{url_for('admin.view_movie')}}" method="POST" 
                  style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; align-items: end;">
                
                <div>
                    <label class="form-label" style="font-size: 0.85rem;">Movie Name</label>
                    <select name="movie_name" class="form-control" style="padding: 8px;">
                        <option value="select_movie" selected disabled>-- Select --</option>
                        {% for name in movie_name %}
                            <option value="{{name['movie_name']}}">{{name['movie_name']}}</option>
                        {% endfor %}
                    </select>
                </div>

                <div>
                    <label class="form-label" style="font-size: 0.85rem;">Language</label>
                    <select name="language" class="form-control" style="padding: 8px;">
                        <option value="select_language" selected disabled>-- Select --</option>
                        <option value="English">English</option>
                        <option value="Hindi">Hindi</option>
                        <option value="Kannada">Kannada</option>
                        <option value="Tamil">Tamil</option>
                        <option value="Telugu">Telugu</option>
                        <option value="Malayalam">Malayalam</option>
                    </select>
                </div>

                <div>
                    <label class="form-label" style="font-size: 0.85rem;">Category</label>
                    <select name="category" class="form-control" style="padding: 8px;">
                        <option value="" selected disabled>-- Select --</option>
                        <option value="Comedy">Comedy</option>
                        <option value="Horror">Horror</option>
                        <option value="Action">Action</option>
                        <option value="Drama">Drama</option>
                        <option value="Thriller">Thriller</option>
                    </select>
                </div>

                <div>
                    <label class="form-label" style="font-size: 0.85rem;">Release Date</label>
                    <input type="date" name="release_date" class="form-control" style="padding: 8px;">
                </div>

                <div>
                    <button type="submit" class="btn btn-primary" style="width: 100%; padding: 10px;">
                        <i class="fas fa-filter"></i> Filter
                    </button>
                </div>

            </form>
        </div>

        <div class="table-responsive">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Movie Name</th>
                        <th>Language</th>
                        <th>Category</th>
                        <th>Release Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% if movies %}
                        {% for movie in movies %}
                        <tr>
                            <td style="font-weight: 600; color: var(--text-main);">{{movie.movie_name}}</td>
                            <td>{{movie.language}}</td>
                            <td>
                                <span style="background: rgba(9, 132, 227, 0.1); color: var(--accent); padding: 4px 10px; border-radius: 5px; font-size: 0.8rem;">
                                    {{movie.category}}
                                </span>
                            </td>
                            <td>{{movie.release_date}}</td>
                        </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="4" style="text-align: center; padding: 40px; color: var(--text-sub);">
                                <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                                No movies found matching your criteria.
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>

    </div>

{% endblock %}