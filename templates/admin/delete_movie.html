{% extends "base.html" %}

{% block header_title %}Movies Management{% endblock %}

{% block sidebar %}
    <li><a href="{{url_for('admin.admin_home')}}"><i class="fas fa-home"></i> Dashboard</a></li>
    <li><a href="{{url_for('admin.add_movie')}}"><i class="fas fa-film"></i> Add Movie</a></li>
    <li><a href="{{url_for('admin.delete_movie')}}" class="active"><i class="fas fa-trash-alt"></i> Delete Movie</a></li>
    <li><a href="{{url_for('admin.view_movie')}}"><i class="fas fa-list"></i> View Movies</a></li>
    <div style="border-top: 1px solid var(--border-color); margin: 10px 15px;"></div>
    <li><a href="{{url_for('admin.add_theater')}}"><i class="fas fa-building"></i> Add Theater</a></li>
    <li><a href="{{url_for('admin.view_theater')}}"><i class="fas fa-map-marker-alt"></i> View Theaters</a></li>
{% endblock %}

{% block content %}
    
    <div style="max-width: 900px; margin: 0 auto;">
        
        <h2 class="page-title">Delete Movie</h2>
        <p style="color: var(--text-sub); margin-bottom: 20px;">Select a movie from the list below to delete it permanently.</p>

        <form action="{{url_for('admin.delete_movie')}}" method="POST">
            
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Select</th>
                            <th>Movie Name</th>
                            <th>Language</th>
                            <th>Category</th>
                            <th>Release Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% if movies %}
                            {% for movie in movies %}
                            <tr>
                                <td style="text-align: center;">
                                    <input type="radio" name="selected_movie" value="{{movie.movie_name}}" 
                                           style="transform: scale(1.5); cursor: pointer; accent-color: var(--accent);">
                                </td>
                                <td style="font-weight: 600; color: var(--text-main);">{{movie.movie_name}}</td>
                                <td>{{movie.language}}</td>
                                <td>
                                    <span style="background: rgba(233, 69, 96, 0.1); color: var(--accent); padding: 4px 10px; border-radius: 5px; font-size: 0.8rem;">
                                        {{movie.category}}
                                    </span>
                                </td>
                                <td>{{movie.release_date}}</td>
                            </tr>
                            {% endfor %}
                        {% else %}
                            <tr>
                                <td colspan="5" style="text-align: center; padding: 40px; color: var(--text-sub);">
                                    <i class="fas fa-film" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                                    No movies found in the database.
                                </td>
                            </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>

            {% if movies %}
            <div style="margin-top: 30px; text-align: center;">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this movie? This action cannot be undone.');">
                    <i class="fas fa-trash-alt"></i> Delete Selected Movie
                </button>
            </div>
            {% endif %}

        </form>
    </div>

{% endblock %}